<Project Sdk="Microsoft.NET.Sdk">
  <!-- Import coverlet version from test setup -->
  <Import Project="MTPTest.props" Condition="Exists('MTPTest.props')" />

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <LangVersion>12.0</LangVersion>
    <OutputType>Exe</OutputType>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
    <!-- Restore from local packages -->
    <RestoreSources>
			https://api.nuget.org/v3/index.json;
			$(RepoRoot)artifacts/package/$(Configuration.ToLowerInvariant())
		</RestoreSources>
 
    <!-- Enable MTP runner -->
    <TestingPlatformDotnetTestSupport>true</TestingPlatformDotnetTestSupport>
    
    <!-- Disable central package management -->
    <ManagePackageVersionsCentrally>false</ManagePackageVersionsCentrally>
    
    <!-- Disable VSTest when not using it -->
    <EnableMSTestRunner>false</EnableMSTestRunner>
    <!-- VSTest properties are irrelevant -->
    <VSTestLogger></VSTestLogger>
    <VSTestResultsDirectory></VSTestResultsDirectory>
    <!-- replace the xUnit.net native command line experience with the Microsoft Testing Platform command line experience -->
    <UseMicrosoftTestingPlatformRunner>true</UseMicrosoftTestingPlatformRunner>
  </PropertyGroup>

	<!-- Define default values if props file doesn't exist -->
	<PropertyGroup Condition="!Exists('MTPTest.props')">
		<coverletMTPVersion>8.0.0</coverletMTPVersion>
	</PropertyGroup>
	
  <ItemGroup>
    <!-- XUnit v3 for Microsoft Testing Platform -->
    <PackageReference Include="xunit.v3.mtp-v2" Version="$(XunitV3Version)" />
		<PackageReference Include="xunit.runner.visualstudio" Version="$(XunitRunnerVisualstudioVersion)" />
    <PackageReference Include="Microsoft.Testing.Platform" Version="$(MicrosoftTestingPlatformVersion)" />

		<!-- Coverlet MTP Extension - version will be provided by local NuGet.config -->
    <PackageReference Include="coverlet.MTP" Version="$(coverletMTPVersion)" />
  </ItemGroup>
  
</Project>
